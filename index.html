<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>X-BAR mini-jeu</title>
    <script src="./script.js"></script>

</head>

<body>
    <div id="Etape1Container"><!--Logo-->
        <div id="Logo">
            <img src="./assets/images/Logo.png" alt="Logo X-BAR">
        </div>
        <!--Titres h4-->
        <h4 class="title-h4">
            Sur ta prochaine commande
        </h4>
        <h4 class="title-h4-border">
            Tente de gagner...
        </h4>
        <!--jeu roulette-->
        <div id="PlayerRoulette" class="relative">
            <img src="./assets/images/e-liquide-10ml.png" class="img-roulette absolute">
            <img src="./assets/images/e-liquide-50ml.png" class="img-roulette absolute">
            <img src="./assets/images/kit-solo.png" class="img-roulette absolute">
            <img src="./assets/images/perdu.png" class="img-roulette absolute">
            <img src="./assets/images/pod.png" class="img-roulette absolute">
            <img src="./assets/images/x-bar-v2.png" class="img-roulette absolute">
        </div>

        <!--Bouton pour afficher produit-->
        <div id="BtnEtape1Container">
            <button id="BtnEtape1">
                Appui sur l'image pour afficher ton produit
            </button>
        </div>

        <div id="CouponLinkContainer">
            <h4 class="title-h4-border">Je récupère mon coupon</h4>
            <img src="./assets/images/DownloadIcon.png" id="couponLink">
        </div>
    </div>

    <script>

        document.addEventListener("DOMContentLoaded", function () {
            var playerRoulette = document.getElementById("PlayerRoulette");
            var images = playerRoulette.getElementsByTagName("img");
            var currentIndex = 0;
            var intervalId;
            var button = document.getElementById("BtnEtape1");
            var couponLink = document.getElementById("CouponLinkContainer");
            var link = document.getElementById("couponLink")

            var imageTexts = [
                " 1 E-liquide 10 ml",
                " 1 E-liquide 50 ml",
                " 1 Kit solo click&puff",
                "Une prochaine fois ! ",
                "1 Pod Click&Puff",
                "  1 X-bar V2  "
            ];

            function scrollImages() {
                images[currentIndex].style.display = "none";
                currentIndex = (currentIndex + 1) % images.length;
                images[currentIndex].style.display = "block";
                couponLink.style.display = "none"
            }

            intervalId = setInterval(scrollImages, 400);

            playerRoulette.addEventListener("click", function () {
                clearInterval(intervalId);
                for (var i = 0; i < images.length; i++) {
                    images[i].style.display = "none";
                }
                images[currentIndex].style.display = "block";
                couponLink.style.display = "block";
                button.textContent = imageTexts[currentIndex];
            });

            link.addEventListener('click', () => {
                window.location.href = "./form.html?" + imageTexts[currentIndex]
            })
        });

    </script>
</body>

</html>